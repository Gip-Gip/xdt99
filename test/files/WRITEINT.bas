100 REM WRITE INTERNAL RECORDS

110 L$="" :: FOR I=0 TO 254 :: L$=L$&CHR$(I) :: NEXT I

200 OPEN #1:"DSK2.IF64V",INTERNAL,OUTPUT,FIXED 64
210 PRINT #1:CHR$(1)&SEG$(L$,1,31)
220 PRINT #1:""
230 PRINT #1:CHR$(3)&SEG$(L$,1,33)
240 CLOSE #1

250 OPEN #1:"DSK2.IV64V",INTERNAL,OUTPUT,VARIABLE 64
260 PRINT #1:CHR$(1)&SEG$(L$,1,31)
270 PRINT #1:""
280 CLOSE #1

300 DATA 2, 64, 127, 128, 254, 255, -1
310 READ L :: IF L=-1 THEN 999
320 PRINT L

400 FOR R=1 TO 2
410 IF R=1 THEN OPEN #1:"DSK2.IV"&STR$(L),INTERNAL,OUTPUT,VARIABLE L
420 IF R=2 THEN OPEN #1:"DSK2.IF"&STR$(L),INTERNAL,OUTPUT,FIXED L

500 FOR I=1 TO 1024/L
510 S=I-256*INT(I/256)
520 PRINT #1:CHR$(S)&SEG$(L$,1,L-2)
530 NEXT I

600 CLOSE #1
610 NEXT R
620 GOTO 310

999 END
